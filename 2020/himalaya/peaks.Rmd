---
title: "popular peaks"
author: "Paul Apivat Hanvongse"
date: "9/24/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Libraries


```{r, echo=FALSE}
library(tidyverse)
library(reactable)
library(htmltools)

df <- read_csv("df.csv")
head(df)
```

## Final Table


```{r final_table, echo=FALSE}

tbl <- reactable(
    df,
    pagination = FALSE,
    defaultSorted = "attempts",
    columns = list(
        peak = colDef(
            name = "Peaks"
        ),
        attempts = colDef(
            name = "Attempts (#)",
            defaultSortOrder = "desc",
            cell = function(value){
                width <- paste0(value * 100 / max(df$attempts), "%")
                value <- format(value, big.mark = ",")
                value <- format(value, width = 9, justify = 'right')
                bar_chart(value, width = width, fill = "#3fc1c9")
            },
            align = "left",
            style = list(fontFamily = "monospace", whiteSpace = "pre")
        ),
        fail_rate = colDef(
            name = "Fail (%)",
            defaultSortOrder = "desc",
            # Format and render the cell with a javascript render function
            cell = JS("function(cellInfo) {
                const pct = (cellInfo.value * 100).toFixed(1) + '%'
                let value = pct.padStart(5)
                if (cellInfo.viewIndex > 0){
                    value = value.replace('%', ' ')
                }
                return(
                '<div style=\"display: flex; align-items: center;\">' +
                    '<span style=\"font-family: monospace; white-space: pre;\">' + value + '</span>' +
                    '<div style=\"flex-grow: 1; margin-left: 6px; height: 14px; background-color: #e1e1e1\">' +
                        '<div style=\"height: 100%; width: ' + pct + '; background-color: #fc5185\"></div>' +
                    '</div>'
                )
            }"),
            
            # Render this column as HTML
            html = TRUE
        )
    ),
    compact = TRUE,
    class = "followers-tbl"
)

```

## Add title and subtitle

```{r, final_demo, eval=FALSE}

div(class = "twitter-followers",
    div(class = "followers-header",
        div(class = "followers-title", "The Most Attempted Peaks of the Himalayas"),
        "And the Most Challenging Among Them."
        ),
    tbl
)

```
